name: merge-gpt-oss-lora
description: Merge LoRA adapter with base GPT-OSS model and save to VESSL Model Registry
tags:
  - merge
  - gpt-oss
  - lora
import:
  /root/code:
    git:
      url: https://github.com/vessl-ai/examples.git
      ref: gpt-oss-ft
  /lora_adapter/: vessl-model://{YOUR_ORGANIZATION}/gpt-oss-20b-multilingual-reasoner/1
resources:
  cluster: vessl-eu-h100-80g-sxm
  preset: gpu-h100-80g-small
image: quay.io/vessl-ai/torch:2.8.0-cuda12.8
run:
  - command: |-
      pip install peft
      python model_merge.py \
        --base_model openai/gpt-oss-20b \
        --lora_adapter /lora_adapter \
        --output_path /merged_model
    workdir: /root/code/runs/finetune-llms
export:
  /merged_model: vessl-model://gpt-oss-20b-multilingual-reasoner-merged
env:
  HF_TOKEN:
    secret: HF_TOKEN
