name: pdf-chatbot
description: PDF chatbot
tags:
  - RAG
  - chatbot
  - LLM
resources:
  cluster: vessl-gcp-oregon
  preset: gpu-l4-small
image: quay.io/vessl-ai/torch:2.1.0-cuda12.2-r3
import:
  /code/:
    git:
      url: github.com/vessl-ai/examples.git
run:
  - command: |
      cd /code/pdf-chatbot
      pip install -r requirements.txt
      pip uninstall -y transformer-engine
    workdir: /code
  - command: |  # Command to run AWQ-quantized model with FlashAttention 2. skippable if you are running other models
      pip install autoawq==0.2.3 flash-attn==2.5.6
    workdir: /code
  - command: |
      cd /code/pdf-chatbot
      python app.py --stream --use-flash-attention
    workdir: /code
interactive:
  max_runtime: 8h
  jupyter:
    idle_timeout: 8h
ports:
  - name: gradio
    type: http
    port: 7860
env:
  HUGGINGFACEHUB_API_TOKEN: <YOUR_HF_API_TOKEN>
termination_protection: false
